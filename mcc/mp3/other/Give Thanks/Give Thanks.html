<!doctype html>
<html lang="ja">
	<head>
		<meta charset="UTF-8">
    <script type="text/javascript" src="/js/get_mp3.js"></script>
		<style type="text/css">
			div.h4   {font-size:1.2em;font-style:oblique;}
			div.nen  {margin-top:1em;}
      h4       {margin:1em 0 2em 1em;font-size:150%;font-style:oblique;}
      li       {margin-left:2em;margin-bottom:2em;}
      li div   {display:inline-block;vertical-align:middle;width:10em;}
      audio    {height:24px;}
      div.link {margin-left:2em;margin-top:2em;}
		</style>
    <script language="javascript" type="text/javascript">
      function plus_password(target){
        var password = prompt("Please enter the password:");
        if (password != null && password !== "") {
          window.location.href = target + "&password=" + password;
        }
      };
      function get_src(part){
        let elms = document.getElementsByTagName("audio");
        let src;
        if(part=="soprano"){
          src = elms[0].src;
        }else if(part=="alto"){
          src = elms[1].src;
        }else if(part=="tenor"){
          src = elms[2].src;
        }else if(part=="bass"){
          src = elms[3].src;
        }
          return src;
      }
      function play_audio(part){
          const audioUrl = get_src(part);
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          fetch(audioUrl).
              then(response => response.arrayBuffer()).
              then(arrayBuffer => audioContext.decodeAudioData(arrayBuffer)).
              then(audioBuffer => {
                const source = audioContext.createBufferSource();
                source.buffer = audioBuffer;
                source.connect(audioContext.destination);
                source.start(0);
                // 音声の高さを変更する処理
                const semitoneShift = -2; // 移調量（例として2半音下げる）      
                const detuneValue = 100 * semitoneShift; 
                source.detune.value = detuneValue;

                // 再生を停止するボタンにクリックイベントを追加
                const stopButton = document.getElementById('stopButton');
                stopButton.addEventListener('click', () => {
                // 再生を停止
                source.stop();
                }).
                 catch(error => console.error('Error loading audio:', error));
              });
      }
      </script>
		<title>'大いなる方に'パート別練習用音源</title>
	</head>
	<body>

<h1>パート別練習用音源</h1>
 <h4>大いなる方に<span style="font-size=75%;">(arranged)</span></h4>
  <ul>
    <li>
      <div>ソプラノ</div>
      <audio src='/tmp/mcc/mp3/other/Give Thanks/01 Give Thanks(soprano).mp3' controls preload="metadata" loop></audio>
      &nbsp;&nbsp;<a href='/tmp/mcc/mp3/other/Give Thanks/01 Give Thanks(soprano).mp3' download><img src='/mcc/img/download-m.png'></a>
      <br>
      <button onclick="play_audio('soprano')">変ホ長調（半音２つ分キーを下げる）</button>
      <button onclick="stop_audio()" id="stopButton">stop</button>
    </li>
    <li>
      <div>アルト</div>
      <audio src='/tmp/mcc/mp3/other/Give Thanks/02 Give Thanks(alto).mp3' controls preload="metadata" loop></audio>
      &nbsp;&nbsp;<a href='/tmp/mcc/mp3/other/Give Thanks/02 Give Thanks(alto).mp3' download><img src='/mcc/img/download-m.png'></a>
      <br>
      <button onclick="play_audio('alto')">変ホ長調（半音２つ分キーを下げる）</button>
      <button onclick="stop_audio()" id="stopButton">stop</button>
    </li>
    <li>
      <div>テノール</div>
      <audio src='/tmp/mcc/mp3/other/Give Thanks/03 Give Thanks(tenor).mp3' controls preload="metadata" loop></audio>
      &nbsp;&nbsp;<a href='/tmp/mcc/mp3/other/Give Thanks/03 Give Thanks(tenor).mp3' download><img src='/mcc/img/download-m.png'></a>
      <br>
      <button onclick="play_audio('tenor')">変ホ長調（半音２つ分キーを下げる）</button>
      <button onclick="stop_audio()" id="stopButton">stop</button>
    </li>
    <li>
      <div>バス</div>
      <audio src='/tmp/mcc/mp3/other/Give Thanks/04 Give Thanks(bass).mp3' controls preload="metadata" loop></audio>
      &nbsp;&nbsp;<a href='/tmp/mcc/mp3/other/Give Thanks/04 Give Thanks(bass).mp3' download><img src='/mcc/img/download-m.png'></a>
      <br>
      <button onclick="play_audio('bass')">変ホ長調（半音２つ分キーを下げる）</button>
      <button onclick="stop_audio()" id="stopButton">stop</button>
    </li>
    <li>
      <div>コーラス</div>
      <audio src='/tmp/mcc/mp3/other/Give Thanks.mp3' controls preload="metadata" loop></audio>
      &nbsp;&nbsp;<a href='/tmp/mcc/mp3/other/Give Thanks.mp3' download><img src='/mcc/img/download-m.png'></a>
      <br>
      <button onclick="play_audio('full')">変ホ長調（半音２つ分キーを下げる）</button>
      <button onclick="stop_audio()" id="stopButton">stop</button>
    </li>
  </ul>
</div>

<div class='link'>
  <a href='#' onclick="plus_password('./Give Thanks(arranged score).pdf')">楽譜(PDF)</a><br>
  <a href='#' onclick="plus_password('./Give Thanks(arranged score).mscz')">楽譜データ(MuseScore)</a><br><br>

  <a href='#' onclick="plus_password('./Give Thanks(Eminor,arranged score).pdf')">楽譜(変ホ長調、PDF)</a><br>
  <a href='#' onclick="plus_password('./Give Thanks(Eminor,arranged score).mscz')">楽譜データ(変ホ長調、MuseScore)</a><br><br>


  <a href='../Carry Me/Carry Me.html'>⇒ Carry Me</a><br>
  <a href='../../../index.html'>⇒ MCCワーシップクワイアーの持ち歌のページに戻る.</a>
</div>


	</body>
</html>